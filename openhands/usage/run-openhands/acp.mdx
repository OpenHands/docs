---
title: Agent Client Protocol (ACP)
description: Use OpenHands CLI with code editors through the Agent Client Protocol
---

<Warning>
This feature is experimental and may have limitations. Please report any issues you encounter on [OpenHands-CLI repo](https://github.com/OpenHands/OpenHands-CLI/issues).
</Warning>

## Prerequisites

Before using OpenHands CLI with ACP, you must first install and configure the CLI:

1. **Install OpenHands CLI** by following the [CLI Mode installation instructions](/openhands/usage/run-openhands/cli-mode)
2. **Configure your LLM settings** using the `/settings` command

The ACP integration will reuse the credentials and configuration from your CLI settings.

## What is the Agent Client Protocol (ACP)?

The [Agent Client Protocol (ACP)](https://agentclientprotocol.com/protocol/overview) is a standardized communication protocol that enables code editors and IDEs to interact with AI agents. ACP defines how clients (like code editors) and agents (like OpenHands) communicate through a JSON-RPC 2.0 interface.
For more details about the protocol, see the [ACP documentation](https://agentclientprotocol.com/protocol/overview).

## ACP Integration

### Toad

[Toad](https://github.com/Textualize/toad) is a universal terminal interface for AI agents, created by [Will McGugan](https://willmcgugan.github.io/), the creator of the popular Python libraries [Rich](https://github.com/Textualize/rich) and [Textual](https://github.com/Textualize/textual). The name comes from "**t**extual c**ode**"—combining the Textual framework with coding assistance.

Toad provides a modern terminal user experience that addresses several limitations common to existing terminal-based AI tools:

- **No flickering or visual artifacts** - Toad can update partial regions of the screen without redrawing everything
- **Scrollback that works** - You can scroll back through your conversation history and interact with previous outputs
- **A unified experience** - Instead of learning different interfaces for different AI agents, Toad provides a consistent experience across all supported agents through ACP

OpenHands is included as a recommended agent in Toad's agent store.

![Toad Terminal Interface](https://willmcgugan.github.io/images/toad-released/toad-1.png)

#### Installation

Install Toad using [uv](https://docs.astral.sh/uv/):

```bash
uvx batrachian-toad
```

For more installation options and documentation, visit [batrachian.ai](https://www.batrachian.ai/).

#### Using OpenHands with Toad

1. Open Toad's agent store
2. Find OpenHands in the list of recommended agents
3. Click "Install" to set up OpenHands via `uv tool install openhands --python 3.12 && openhands login`
4. Select OpenHands and start a conversation

#### Passing Command Line Arguments

You can launch Toad with specific OpenHands command line arguments by passing the full command:

```bash
toad acp "openhands acp --llm-approve"
```

This allows you to use OpenHands CLI flags like `--llm-approve` for automatic LLM approval mode.

<Note>
Some OpenHands CLI flags like `--resume` and `--last` are not yet supported in ACP mode. See [this issue](https://github.com/OpenHands/OpenHands-CLI/issues/260) for updates.
</Note>

### Zed IDE

<video
  controls
  className="w-full aspect-video"
  src="https://github.com/user-attachments/assets/5b921c1d-7543-4d59-b7dd-a6cb51321fd5">
</video>


[Zed](https://zed.dev/) is a high-performance code editor with built-in support for the Agent Client Protocol.

To configure OpenHands CLI with Zed:

1. Ensure OpenHands CLI is installed and configured (see [Prerequisites](#prerequisites))

2. Open your Zed editor, use `Cmd+Shift+P` (Mac) or `Ctrl+Shift+P` (Windows/Linux) to open the command palette, and search for `agent: open settings`

![Zed Command Palette](/openhands/static/img/acp-zed-settings.png)

3. Then on the right side, click on `+ Add Agent` and select `Add Custom Agent`

![Zed Add Custom Agent](/openhands/static/img/acp-zed-add-agent.png)

4. Add the following to the `"agent_servers"` field:

```json
{
  "agent_servers": {
    "OpenHands": {
      "command": "uvx",
      "args": [
        "openhands",
        "acp"
      ],
      "env": {}
    }
  }
}
```


4. Save the file

5. You can now use OpenHands within Zed!

![Zed Use OpenHands Agent](/openhands/static/img/acp-zed-use-openhands.png)

#### Troubleshooting

If you encounter issues while using OpenHands in Zed with the ACP plugin, you can access detailed debug logs:

1. Open the command palette with `Cmd+Shift+P` (Mac) or `Ctrl+Shift+P` (Windows/Linux)
2. Type and select `acp debug log` to view detailed debug information
3. Review the logs for any errors or warnings
4. Restart a new conversation to reload connections after making configuration changes

The debug logs can help you identify configuration issues, connection problems, or errors in your setup.

<Note>
If you encounter persistent issues, verify that OpenHands CLI is properly configured (see [Prerequisites](#prerequisites)) and that all server commands are executable from your system PATH.
</Note>

### VS Code

<Note>
VS Code does not have native ACP support, but a community extension is available. This extension is maintained by [Omer Cohen](https://github.com/omercnet) and is not officially supported by OpenHands or Microsoft.
</Note>

[VS Code](https://code.visualstudio.com/) can connect to ACP-compatible agents through the [VSCode ACP](https://marketplace.visualstudio.com/items?itemName=omercnet.vscode-acp) community extension.

To configure OpenHands CLI with VS Code:

1. Ensure OpenHands CLI is installed and configured (see [Prerequisites](#prerequisites))

2. Open VS Code and go to Extensions (`Cmd+Shift+X` on Mac or `Ctrl+Shift+X` on Windows/Linux)

3. Search for "VSCode ACP" and click `Install`

4. Click the **VSCode ACP** icon in the Activity Bar (left sidebar)

5. Click `Connect` to start a session

6. Select **OpenHands** from the agent dropdown

7. Start chatting with OpenHands!

The extension auto-detects installed agents by checking your system PATH. If OpenHands CLI is properly installed, it will appear in the agent dropdown automatically.

#### Features

The VSCode ACP extension provides:

- **Native Chat Interface** — Integrated sidebar chat that feels like part of VS Code
- **Tool Visibility** — See what commands the AI runs with expandable input/output
- **Rich Markdown** — Code blocks, syntax highlighting, and formatted responses
- **Streaming Responses** — Watch the AI think in real-time

#### Troubleshooting

If OpenHands doesn't appear in the agent dropdown:

1. Verify OpenHands CLI is installed by running `which openhands` (Mac/Linux) or `where openhands` (Windows) in your terminal
2. Ensure the `openhands` command is in your system PATH
3. Restart VS Code after installing OpenHands CLI

### JetBrains IDEs

[JetBrains IDEs](https://www.jetbrains.com/) (IntelliJ IDEA, PyCharm, WebStorm, etc.) support the Agent Client Protocol through JetBrains AI Assistant.

To configure OpenHands CLI with JetBrains IDEs:

1. Ensure OpenHands CLI is installed and configured (see [Prerequisites](#prerequisites))

2. Find the full path to the `openhands` executable by running in your terminal:

```bash
which openhands
```

3. Create or edit the file `$HOME/.jetbrains/acp.json` and add the following configuration, replacing `{full_path_to_openhands}` with the actual full path from step 2:

```json
{
  "agent_servers": {
    "OpenHands": {
      "command": "{full_path_to_openhands}",
      "args": ["acp"],
      "env": {}
    }
  }
}
```

For example, if `which openhands` returns `/Users/username/.local/bin/openhands`, your configuration should look like:

```json
{
  "agent_servers": {
    "OpenHands": {
      "command": "/Users/username/.local/bin/openhands",
      "args": ["acp"],
      "env": {}
    }
  }
}
```

4. Follow the [JetBrains ACP instructions](https://www.jetbrains.com/help/ai-assistant/acp.html) to open and use an agent in your JetBrains IDE

<Note>
Make sure you have JetBrains AI Assistant enabled in your IDE. The AI Assistant is available in JetBrains IDEs version 2024.3 or later.
</Note>

## See Also

- [CLI Mode](/openhands/usage/run-openhands/cli-mode) - Learn about using OpenHands CLI interactively
- [ACP Documentation](https://agentclientprotocol.com/protocol/overview) - Full Agent Client Protocol specification
- [Toad Documentation](https://www.batrachian.ai/) - Learn more about using Toad terminal interface
- [Zed Documentation](https://zed.dev/docs) - Learn more about using Zed editor
- [VSCode ACP Extension](https://marketplace.visualstudio.com/items?itemName=omercnet.vscode-acp) - Community extension for VS Code ACP support
- [JetBrains ACP Documentation](https://www.jetbrains.com/help/ai-assistant/acp.html) - Learn more about using ACP in JetBrains IDEs
