---
title: VS Code with Docker
description: Enable VS Code Web integration for interactive code editing with Docker-sandboxed agents.
---

VS Code with Docker demonstrates how to enable VS Code Web integration in a Docker-sandboxed environment. This allows you to access a full VS Code editor running in the container, making it easy to inspect, edit, and manage files that the agent is working with.

## Basic Example

<Note>
This example is available on GitHub: [examples/02_remote_agent_server/04_vscode_with_docker_sandboxed_server.py](https://github.com/OpenHands/agent-sdk/blob/main/examples/02_remote_agent_server/04_vscode_with_docker_sandboxed_server.py)
</Note>

This example shows how to configure DockerWorkspace with VS Code Web access:

```python icon="python" expandable examples/02_remote_agent_server/04_vscode_with_docker_sandboxed_server.py
import os
import time

import httpx
from pydantic import SecretStr

from openhands.sdk import LLM, Conversation, get_logger
from openhands.sdk.conversation.impl.remote_conversation import RemoteConversation
from openhands.tools.preset.default import get_default_agent
from openhands.workspace import DockerWorkspace


logger = get_logger(__name__)


api_key = os.getenv("LLM_API_KEY")
assert api_key is not None, "LLM_API_KEY environment variable is not set."

llm = LLM(
    usage_id="agent",
    model="litellm_proxy/anthropic/claude-sonnet-4-5-20250929",
    base_url="https://llm-proxy.eval.all-hands.dev",
    api_key=SecretStr(api_key),
)

# Create a Docker-based remote workspace with extra ports for VSCode access
with DockerWorkspace(
    base_image="nikolaik/python-nodejs:python3.12-nodejs22",
    host_port=18010,
    # TODO: Change this to your platform if not linux/arm64
    platform="linux/arm64",
    extra_ports=True,  # Expose extra ports for VSCode and VNC
    forward_env=["LLM_API_KEY"],  # Forward API key to container
) as workspace:
    """Extra ports allows you to access VSCode at localhost:8011"""

    # Create agent
    agent = get_default_agent(
        llm=llm,
        cli_mode=True,
    )

    # Set up callback collection
    received_events: list = []
    last_event_time = {"ts": time.time()}

    def event_callback(event) -> None:
        event_type = type(event).__name__
        logger.info(f"🔔 Callback received event: {event_type}\n{event}")
        received_events.append(event)
        last_event_time["ts"] = time.time()

    # Create RemoteConversation using the workspace
    conversation = Conversation(
        agent=agent,
        workspace=workspace,
        callbacks=[event_callback],
        visualize=True,
    )
    assert isinstance(conversation, RemoteConversation)

    logger.info(f"\n📋 Conversation ID: {conversation.state.id}")
    logger.info("📝 Sending first message...")
    conversation.send_message("Create a simple Python script that prints Hello World")
    conversation.run()

    # Get VSCode URL with token
    vscode_port = (workspace.host_port or 8010) + 1
    try:
        response = httpx.get(
            f"{workspace.host}/api/vscode/url",
            params={"workspace_dir": workspace.working_dir},
        )
        vscode_data = response.json()
        vscode_url = vscode_data.get("url", "").replace(
            "localhost:8001", f"localhost:{vscode_port}"
        )
    except Exception:
        # Fallback if server route not available
        folder = (
            f"/{workspace.working_dir}"
            if not str(workspace.working_dir).startswith("/")
            else str(workspace.working_dir)
        )
        vscode_url = f"http://localhost:{vscode_port}/?folder={folder}"

    # Wait for user to explore VSCode
    y = None
    while y != "y":
        y = input(
            "\n"
            "Because you've enabled extra_ports=True in DockerWorkspace, "
            "you can open VSCode Web to see the workspace.\n\n"
            f"VSCode URL: {vscode_url}\n\n"
            "The VSCode should have the OpenHands settings extension installed:\n"
            "  - Dark theme enabled\n"
            "  - Auto-save enabled\n"
            "  - Telemetry disabled\n"
            "  - Auto-updates disabled\n\n"
            "Press 'y' and Enter to exit and terminate the workspace.\n"
            ">> "
        )
```

```bash Running the Example
export LLM_API_KEY="your-api-key"
cd agent-sdk
uv run python examples/02_remote_agent_server/04_vscode_with_docker_sandboxed_server.py
```

## Key Concepts

### VS Code-Enabled DockerWorkspace

The workspace is configured with extra ports for VS Code access:

```python highlight={27-34}
with DockerWorkspace(
    base_image="nikolaik/python-nodejs:python3.12-nodejs22",
    host_port=18010,
    platform="linux/arm64",
    extra_ports=True,  # Expose extra ports for VSCode and VNC
    forward_env=["LLM_API_KEY"],  # Forward API key to container
) as workspace:
    """Extra ports allows you to access VSCode at localhost:8011"""
```

The `extra_ports=True` setting exposes:
- **Port 8011**: VS Code Web interface (host_port + 1)
- **Port 8012**: VNC viewer for visual access

### VS Code URL Generation

The example retrieves the VS Code URL with authentication token:

```python highlight={68-86}
# Get VSCode URL with token
vscode_port = (workspace.host_port or 8010) + 1
try:
    response = httpx.get(
        f"{workspace.host}/api/vscode/url",
        params={"workspace_dir": workspace.working_dir},
    )
    vscode_data = response.json()
    vscode_url = vscode_data.get("url", "").replace(
        "localhost:8001", f"localhost:{vscode_port}"
    )
except Exception:
    # Fallback if server route not available
    folder = (
        f"/{workspace.working_dir}"
        if not str(workspace.working_dir).startswith("/")
        else str(workspace.working_dir)
    )
    vscode_url = f"http://localhost:{vscode_port}/?folder={folder}"
```

This generates a properly authenticated URL with the workspace directory pre-opened.

### Agent Task Execution

The agent creates files that you can then inspect in VS Code:

```python highlight={62-65}
logger.info(f"\n📋 Conversation ID: {conversation.state.id}")
logger.info("📝 Sending first message...")
conversation.send_message("Create a simple Python script that prints Hello World")
conversation.run()
```

After the agent completes the task, you can open VS Code to see the generated files.

### Interactive VS Code Access

The example waits for user confirmation before exiting:

```python highlight={88-102}
y = None
while y != "y":
    y = input(
        "\n"
        "Because you've enabled extra_ports=True in DockerWorkspace, "
        "you can open VSCode Web to see the workspace.\n\n"
        f"VSCode URL: {vscode_url}\n\n"
        "The VSCode should have the OpenHands settings extension installed:\n"
        "  - Dark theme enabled\n"
        "  - Auto-save enabled\n"
        "  - Telemetry disabled\n"
        "  - Auto-updates disabled\n\n"
        "Press 'y' and Enter to exit and terminate the workspace.\n"
        ">> "
    )
```

This gives you time to explore the workspace in VS Code before the container is cleaned up.

## When to Use VS Code with Docker

Use VS Code-enabled Docker workspaces when you need:

- **Code Inspection**: Review files created by the agent
- **Manual Editing**: Make manual corrections or additions
- **Debugging**: Investigate issues in the workspace
- **Learning**: Understand what the agent is doing
- **Collaboration**: Share workspace access with team members

## Benefits

### Development Benefits

- **Full IDE Experience**: Complete VS Code features in browser
- **No Local Setup**: No need to install VS Code locally
- **Isolated Environment**: All edits happen in container
- **Pre-configured**: Optimized settings for agent workflows

### VS Code Features Available

The VS Code Web instance includes:
- **Syntax Highlighting**: For all major languages
- **File Explorer**: Navigate workspace structure
- **Search**: Find text across files
- **Terminal**: Execute commands in container
- **Extensions**: Pre-installed development extensions

### OpenHands-Optimized Settings

The VS Code instance comes with:
- **Dark Theme**: Better visibility
- **Auto-save**: Automatic file saving
- **Telemetry Disabled**: Privacy-focused
- **Auto-updates Disabled**: Consistent environment

## Accessing VS Code

The VS Code URL format is:

```
http://localhost:{vscode_port}/?tkn={token}&folder={workspace_dir}
```

**URL Components:**
- `vscode_port`: Usually host_port + 1 (e.g., 8011)
- `tkn`: Authentication token for security
- `folder`: Workspace directory to open

## Use Cases

### Code Review

After the agent generates code:
1. Agent creates files
2. Open VS Code URL in browser
3. Review code structure and quality
4. Make manual adjustments if needed

### Debugging

When the agent encounters issues:
1. Agent attempts to solve problem
2. Open VS Code to inspect state
3. Identify the issue manually
4. Guide the agent with additional instructions

### Learning

To understand agent behavior:
1. Give agent a complex task
2. Watch it work through the problem
3. Open VS Code to see incremental changes
4. Learn agent's problem-solving approach

## Next Steps

- **[Browser with Docker](/sdk/guides/agent-server/browser-with-docker)** - Add browser capabilities
- **[Docker Sandboxed Server](/sdk/guides/agent-server/docker-sandboxed-server)** - Base Docker setup
- **[Local Agent Server](/sdk/guides/agent-server/local-agent-server)** - Development basics
