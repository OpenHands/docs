---
title: Plugins
description: Plugins bundle skills, hooks, MCP servers, agents, and commands into reusable packages that extend agent capabilities.
---

Plugins provide a way to package and distribute multiple agent components together. A single plugin can include:

- **Skills**: Specialized knowledge and workflows
- **Hooks**: Event handlers for tool lifecycle
- **MCP Config**: External tool server configurations
- **Agents**: Specialized agent definitions
- **Commands**: Slash commands

The plugin format is compatible with the [Claude Code plugin structure](https://github.com/anthropics/claude-code/tree/main/plugins).

## Recommended: Plugin Loading via Conversation

The recommended way to load plugins is via the `plugins` parameter on `Conversation`. This approach:

- **Automatic Loading**: Plugins are fetched and loaded automatically
- **Automatic Merging**: Skills, MCP configs, and hooks are merged correctly
- **Multi-Plugin Support**: Load multiple plugins with proper conflict resolution
- **Git Support**: Use GitHub shorthand, git URLs, or local paths
- **Version Pinning**: Pin to specific branches, tags, or commits
- **Monorepo Support**: Load plugins from subdirectories in monorepos

### Basic Usage

```python
from openhands.sdk import Agent, Conversation
from openhands.sdk.plugin import PluginSource

conversation = Conversation(
    agent=agent,
    workspace="./workspace",
    plugins=[
        PluginSource(source="github:org/security-plugin", ref="v2.0.0"),
        PluginSource(source="/local/path/to/plugin"),
    ],
)
```

### Plugin Source Formats

**GitHub Shorthand**
```python
PluginSource(source="github:owner/repo")
PluginSource(source="github:owner/repo", ref="v1.0.0")  # Pin to tag
PluginSource(source="github:owner/repo", ref="main")    # Pin to branch
```

**Git URL** (works with any git host)
```python
PluginSource(source="https://github.com/org/repo.git")
PluginSource(source="https://gitlab.com/org/repo.git", ref="develop")
PluginSource(source="git@github.com:org/repo.git")  # SSH
```

**Local Path**
```python
PluginSource(source="/absolute/path/to/plugin")
PluginSource(source="./relative/path/to/plugin")
```

**Monorepo** (plugin in subdirectory)
```python
PluginSource(
    source="github:org/plugins-monorepo",
    repo_path="plugins/security",
)
```

### Multiple Plugins

When loading multiple plugins, components are merged in order:

- **Skills**: Override by name (last plugin wins)
- **MCP Config**: Override by server name (last plugin wins)
- **Hooks**: Concatenate (all hooks run)

```python
plugins = [
    PluginSource(source="github:org/base-plugin"),
    PluginSource(source="github:org/overlay-plugin"),  # Overrides base
]
```

### Remote Conversations

The same `plugins` parameter works with remote agent servers:

```python
from openhands.sdk.workspace import RemoteWorkspace

conversation = Conversation(
    agent=agent,
    workspace=RemoteWorkspace(host="http://agent-server:8000"),
    plugins=[
        PluginSource(source="github:org/plugin", ref="v1.0.0"),
    ],
)
```

Plugins are sent to the server and loaded inside the sandbox.

### Complete Example

<Note>
Full example on GitHub: [examples/05_skills_and_plugins/03_plugin_via_conversation/main.py](https://github.com/OpenHands/software-agent-sdk/blob/main/examples/05_skills_and_plugins/03_plugin_via_conversation/main.py)
</Note>

```python
from openhands.sdk import LLM, Agent, Conversation
from openhands.sdk.plugin import PluginSource
from openhands.sdk.tool import Tool
from openhands.tools.terminal import TerminalTool

# Define plugins to load
plugins = [
    PluginSource(source="github:org/code-quality", ref="v1.0.0"),
]

# Configure agent
llm = LLM(usage_id="demo", model="anthropic/claude-sonnet-4-5-20250929", api_key=api_key)
agent = Agent(llm=llm, tools=[Tool(name=TerminalTool.name)])

# Create conversation - plugins are loaded and merged automatically
conversation = Conversation(
    agent=agent,
    workspace="./workspace",
    plugins=plugins,
)

# Skills from plugins are now available to the agent
conversation.send_message("How do I lint Python code?")
conversation.run()
```

```bash Running the Example
export LLM_API_KEY="your-api-key"
cd agent-sdk
uv run python examples/05_skills_and_plugins/03_plugin_via_conversation/main.py
```

## Manual Plugin Loading

<Note>
For most use cases, the [recommended approach](#recommended-plugin-loading-via-conversation) above is simpler and handles merging automatically.
</Note>

For advanced use cases where you need fine-grained control over plugin loading, you can use `Plugin.load()` directly:

```python
from openhands.sdk.plugin import Plugin

# Load a single plugin
plugin = Plugin.load("/path/to/plugin")

# Access plugin components
print(f"Name: {plugin.name}, Version: {plugin.version}")
print(f"Skills: {len(plugin.skills)}")
print(f"Hooks: {'Yes' if plugin.hooks else 'No'}")
print(f"MCP servers: {list(plugin.mcp_config.get('mcpServers', {}).keys())}")

# Load all plugins from a directory
plugins = Plugin.load_all("/path/to/plugins")
```

### Using Components Manually

When loading manually, you wire each component to the agent yourself:

```python
from openhands.sdk import Agent, AgentContext, Conversation

# Create agent context with plugin skills
agent_context = AgentContext(
    skills=plugin.skills,
    load_public_skills=False,
)

# Create agent with plugin MCP config
agent = Agent(
    llm=llm,
    tools=tools,
    agent_context=agent_context,
    mcp_config=plugin.mcp_config or {},
)

# Create conversation with plugin hooks
conversation = Conversation(
    agent=agent,
    workspace="./workspace",
    hook_config=plugin.hooks,
)
```

<Note>
Full example on GitHub: [examples/05_skills_and_plugins/02_loading_plugins/main.py](https://github.com/OpenHands/software-agent-sdk/blob/main/examples/05_skills_and_plugins/02_loading_plugins/main.py)
</Note>

```bash Running the Example
export LLM_API_KEY="your-api-key"
cd agent-sdk
uv run python examples/05_skills_and_plugins/02_loading_plugins/main.py
```

## Plugin Structure

<Note>
See the [example_plugins directory](https://github.com/OpenHands/software-agent-sdk/tree/main/examples/05_skills_and_plugins/02_loading_plugins/example_plugins) for a complete working plugin structure.
</Note>

A plugin follows this directory structure:

```
plugin-name/
├── .plugin/
│   └── plugin.json          # Plugin metadata (required)
├── skills/                   # Skills directory (optional)
│   └── skill-name/
│       └── SKILL.md         # Skill definition
├── hooks/                    # Hooks directory (optional)
│   └── hooks.json           # Hook definitions
├── agents/                   # Agents directory (optional)
│   └── agent-name.md        # Agent definition
├── commands/                 # Commands directory (optional)
│   └── command-name.md      # Command definition
├── .mcp.json                 # MCP server config (optional)
└── README.md                 # Plugin documentation
```

### Plugin Manifest (plugin.json)

The manifest file defines plugin metadata:

```json
{
  "name": "code-quality",
  "version": "1.0.0",
  "description": "Code quality tools and workflows",
  "author": "openhands",
  "license": "MIT",
  "repository": "https://github.com/example/code-quality-plugin"
}
```

### Skills

Skills are defined in markdown files with YAML frontmatter:

```markdown
---
name: python-linting
description: Instructions for linting Python code
trigger:
  type: keyword
  keywords:
    - lint
    - linting
    - code quality
---

# Python Linting Skill

Run ruff to check for issues:

\`\`\`bash
ruff check .
\`\`\`
```

### Hooks

Hooks are defined in `hooks/hooks.json`:

```json
{
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "file_editor",
        "hooks": [
          {
            "type": "command",
            "command": "echo 'File edited: $OPENHANDS_TOOL_NAME'",
            "timeout": 5
          }
        ]
      }
    ]
  }
}
```

### MCP Configuration

MCP servers are configured in `.mcp.json`:

```json
{
  "mcpServers": {
    "fetch": {
      "command": "uvx",
      "args": ["mcp-server-fetch"]
    }
  }
}
```

## Using Plugin Components

### Loading a Plugin

```python
from openhands.sdk.plugin import Plugin

# Load a single plugin
plugin = Plugin.load("/path/to/plugin")

# Load all plugins from a directory
plugins = Plugin.load_all("/path/to/plugins")
```

### Accessing Components

```python
# Skills
for skill in plugin.skills:
    print(f"Skill: {skill.name}")

# Hooks configuration
if plugin.hooks:
    print(f"Hooks configured: {plugin.hooks}")

# MCP servers
if plugin.mcp_config:
    servers = plugin.mcp_config.get("mcpServers", {})
    print(f"MCP servers: {list(servers.keys())}")
```

### Using with an Agent

```python highlight={3,10,17}
# Create agent context with plugin skills
agent_context = AgentContext(
    skills=plugin.skills,
)

# Create agent with plugin MCP config
agent = Agent(
    llm=llm,
    tools=tools,
    mcp_config=plugin.mcp_config or {},
    agent_context=agent_context,
)

# Create conversation with plugin hooks
conversation = Conversation(
    agent=agent,
    hook_config=plugin.hooks,
)
```

## Next Steps

- **[Skills](/sdk/guides/skill)** - Learn more about skills and triggers
- **[Hooks](/sdk/guides/hooks)** - Understand hook event types
- **[MCP Integration](/sdk/guides/mcp)** - Configure external tool servers
