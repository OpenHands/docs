---
title: GrepTool
description: Search file contents using regex patterns with context and match highlighting.
---

GrepTool enables content search across files using regex patterns, providing context around matches and detailed results.

**Source**: [`openhands/tools/grep/`](https://github.com/All-Hands-AI/agent-sdk/tree/main/openhands/tools/grep)

## Usage

```python
from openhands.tools import GrepTool

agent = Agent(llm=llm, tools=[GrepTool.create()])
```

## Action Model

**Source**: [`openhands/tools/grep/definition.py`](https://github.com/All-Hands-AI/agent-sdk/blob/main/openhands/tools/grep/definition.py)

```python
class GrepAction(Action):
    pattern: str  # Regex pattern to search
    path: str = "."  # Directory or file to search
    case_sensitive: bool = False  # Case sensitivity
```

## Observation Model

```python
class GrepObservation(Observation):
    matches: list[dict]  # List of matches with context
    # Each match contains:
    # - file: str - File path
    # - line: int - Line number
    # - content: str - Matching line
```

## Examples

### Search for Function Definition

```python
GrepAction(
    pattern=r"def\s+\w+\(",
    path="src/",
    case_sensitive=False
)
# Returns: [
#   {"file": "src/main.py", "line": 10, "content": "def process_data(x):"},
#   ...
# ]
```

### Case-Sensitive Search

```python
GrepAction(
    pattern="TODO",
    path=".",
    case_sensitive=True
)
# Only matches exact case "TODO"
```

### Search Specific File

```python
GrepAction(
    pattern="import.*pandas",
    path="script.py"
)
```

## Pattern Syntax

Supports Python regex patterns:
- `.`: Any character
- `*`: Zero or more
- `+`: One or more
- `?`: Optional
- `[]`: Character class
- `()`: Group
- `|`: Alternation
- `^`: Line start
- `$`: Line end

## Common Use Cases

### Find TODOs

```python
GrepAction(pattern=r"TODO|FIXME|XXX", path=".")
```

### Find Imports

```python
GrepAction(pattern=r"^import |^from .* import ", path="src/")
```

### Find API Keys (for security review)

```python
GrepAction(pattern=r"api[_-]key|secret|password", path=".")
```

### Find Function Calls

```python
GrepAction(pattern=r"database\.query\(", path=".")
```

## Best Practices

1. **Escape Special Characters**: Use `\` for regex special chars
2. **Use Anchors**: `^` and `$` for line boundaries
3. **Case Insensitive Default**: Unless exact case matters
4. **Narrow Search Paths**: Search specific directories
5. **Combine with GlobTool**: Find files first, then grep

## Workflow Pattern

```python
# 1. Find relevant files
glob_action = GlobAction(pattern="**/*.py")

# 2. Search content in those files
grep_action = GrepAction(
    pattern="class.*Exception",
    path="src/"
)
```

## See Also

- **[GlobTool](/sdk/architecture/tools/glob.mdx)** - Find files
- **[FileEditorTool](/sdk/architecture/tools/file_editor.mdx)** - View/edit files
- **[BashTool](/sdk/architecture/tools/bash.mdx)** - Alternative with `grep` command
