---
title: Git
description: API reference for openhands.sdk.git
---

# Git

**Source:** [`openhands/sdk/git/`](https://github.com/OpenHands/software-agent-sdk/tree/main/openhands-sdk/openhands/sdk/git/)

---

## Classes

### `GitError`

Base exception for git-related errors.

---

### `GitRepositoryError`

Exception raised when git repository operations fail.

#### Methods

##### `__init__(self, message: str, command: str | None, exit_code: int | None)`

---

### `GitCommandError`

Exception raised when git command execution fails.

#### Methods

##### `__init__(self, message: str, command: list[str], exit_code: int, stderr: str)`

---

### `GitPathError`

Exception raised when git path operations fail.

---

### `GitChangeStatus`

---

### `GitChange`

---

### `GitDiff`

---

## Functions

### `get_changes_in_repo(repo_dir: str | Path) -> list[GitChange]`

Get git changes in a repository relative to the origin default branch.

This is different from `git status` as it compares against the remote branch
rather than the staging area.


**Parameters:**

repo_dir: Path to the git repository


**Returns:**

List of GitChange objects representing the changes


**Raises:**

GitRepositoryError: If the directory is not a valid git repository
GitCommandError: If git commands fail

---

### `get_git_changes(cwd: str | Path) -> list[GitChange]`

---

### `get_closest_git_repo(path: Path) -> Path | None`

Find the closest git repository by walking up the directory tree.


**Parameters:**

path: Starting path to search from


**Returns:**

Path to the git repository root, or None if not found

---

### `get_git_diff(relative_file_path: str | Path) -> GitDiff`

Get git diff for a single file.


**Parameters:**

relative_file_path: Path to the file relative to current working directory


**Returns:**

GitDiff object containing diff information


**Raises:**

GitPathError: If file is too large or doesn't exist
GitRepositoryError: If not in a git repository
GitCommandError: If git commands fail

---

### `run_git_command(args: list[str], cwd: str | Path) -> str`

Run a git command safely without shell injection vulnerabilities.


**Parameters:**

args: List of command arguments (e.g., ['git', 'status', '--porcelain'])
cwd: Working directory to run the command in


**Returns:**

Command output as string


**Raises:**

GitCommandError: If the git command fails

---

### `get_valid_ref(repo_dir: str | Path) -> str | None`

Get a valid git reference to compare against.

Tries multiple strategies to find a valid reference:
1. Current branch's origin (e.g., origin/main)
2. Default branch (e.g., origin/main, origin/master)
3. Merge base with default branch
4. Empty tree (for new repositories)


**Parameters:**

repo_dir: Path to the git repository


**Returns:**

Valid git reference hash, or None if no valid reference found

---

### `validate_git_repository(repo_dir: str | Path) -> Path`

Validate that the given directory is a git repository.


**Parameters:**

repo_dir: Path to check


**Returns:**

Validated Path object


**Raises:**

GitRepositoryError: If not a valid git repository

---

