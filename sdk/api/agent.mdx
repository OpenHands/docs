---
title: Agent
description: API reference for openhands.sdk.agent
---

# Agent

**Source:** [`openhands/sdk/agent/`](https://github.com/OpenHands/software-agent-sdk/tree/main/openhands-sdk/openhands/sdk/agent/)

---

## Classes

### `Agent`

#### Methods

##### `init_state(self, state: ConversationState, on_event: ConversationCallbackType) -> None`

##### `step(self, conversation: LocalConversation, on_event: ConversationCallbackType) -> None`

---

### `AgentBase`

Abstract base class for agents.
Agents are stateless and should be fully defined by their configuration.

#### Methods

##### `prompt_dir(self) -> str`

Returns the directory where this class's module file is located.

##### `name(self) -> str`

Returns the name of the Agent.

##### `system_message(self) -> str`

Compute system message on-demand to maintain statelessness.

##### `init_state(self, state: 'ConversationState', on_event: 'ConversationCallbackType') -> None`

Initialize the empty conversation state to prepare the agent for user
messages.

Typically this involves adding system message

NOTE: state will be mutated in-place.

##### `step(self, conversation: 'LocalConversation', on_event: 'ConversationCallbackType') -> None`

Taking a step in the conversation.

Typically this involves:
1. Making a LLM call
2. Executing the tool
3. Updating the conversation state with
LLM calls (role="assistant") and tool results (role="tool")
4.1 If conversation is finished, set state.agent_status to FINISHED
4.2 Otherwise, just return, Conversation will kick off the next step

NOTE: state will be mutated in-place.

##### `resolve_diff_from_deserialized(self, persisted: 'AgentBase') -> 'AgentBase'`

Return a new AgentBase instance equivalent to `persisted` but with
explicitly whitelisted fields (e.g. api_key, security_analyzer) taken from
`self`.

##### `model_dump_succint(self)`

Like model_dump, but excludes None fields by default.

##### `get_all_llms(self) -> Generator[LLM, None, None]`

Recursively yield unique *base-class* LLM objects reachable from `self`.

- Returns actual object references (not copies).
- De-dupes by `id(LLM)`.
- Cycle-safe via a visited set for *all* traversed objects.
- Only yields objects whose type is exactly `LLM` (no subclasses).
- Does not handle dataclasses.

##### `tools_map(self) -> dict[str, ToolDefinition]`

Get the initialized tools map.

**Raises:**

RuntimeError: If the agent has not been initialized.

---

