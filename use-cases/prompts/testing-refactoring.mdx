---
title: "Testing & Refactoring Prompts"
sidebarTitle: "Testing & Refactoring"
description: "Ready-to-use prompts for testing and refactoring tasks"
---

# Testing & Refactoring Prompts

Copy and customize these prompts for common testing and refactoring tasks.

## Unit Testing Prompts

### Add Unit Tests to a Function

```markdown
Add unit tests for the [function_name] function in [file_path].

Test cases to cover:
1. Happy path with valid input
2. Edge case: empty input
3. Edge case: null/undefined input  
4. Error case: invalid input type
5. Boundary conditions

Framework: [pytest/jest/etc]
Location: [test_file_path]
Follow patterns in: [example_test_file]
```

### Increase Test Coverage

```markdown
Increase test coverage for [module_name] from [current]% to [target]%.

Priority order:
1. Untested public methods
2. Error handling paths
3. Edge cases in existing tests
4. Integration points

Generate a coverage report first, then add tests for uncovered lines.
```

### Add Integration Tests

```markdown
Add integration tests for the [feature] workflow.

Test the complete flow:
1. [Step 1]
2. [Step 2]  
3. [Step 3]

Setup requirements:
- Test database with seed data
- Mock external services: [list]

Assertions:
- Database state after each step
- API response formats
- Side effects (emails, events, etc.)
```

## Refactoring Prompts

### Extract Method

```markdown
Extract the code block at lines [X-Y] in [file] into a new method.

New method:
- Name: [method_name]
- Parameters: [infer from extracted code]
- Return type: [infer or specify]

Requirements:
- Update original code to call new method
- Add docstring to new method
- All tests must pass
```

### Extract Class

```markdown
Extract [responsibility] from [class_name] into a new class.

New class: [NewClassName]
Location: [file_path]

Move these methods:
- [method1]
- [method2]

Move these properties:
- [property1]
- [property2]

Update [OriginalClass] to use [NewClassName] via composition.
Maintain backward compatibility.
```

### Reduce Duplication

```markdown
Identify and eliminate code duplication in [module/directory].

Analysis:
1. Find duplicate or near-duplicate code blocks
2. Identify common patterns that should be abstracted

Actions:
1. Create shared utility functions
2. Extract common base classes if appropriate
3. Update all usages to use shared code
4. Ensure all tests pass
```

### Improve Error Handling

```markdown
Improve error handling in [file/module].

Current issues:
- Generic exceptions caught everywhere
- Errors not logged properly
- Missing error recovery

Requirements:
1. Create specific exception classes
2. Add proper try/catch blocks
3. Log errors with context
4. Implement graceful degradation where possible
5. Update tests to verify error handling
```

### Apply Design Pattern

```markdown
Refactor [code_area] to use the [Pattern] pattern.

Current implementation:
[Describe current approach]

Target:
Apply [Strategy/Factory/Observer/etc] pattern to:
- [Benefit 1]
- [Benefit 2]

Constraints:
- Maintain existing public API
- All tests must pass
- Add tests for new pattern usage
```

## Code Quality Prompts

### Add Type Annotations

```markdown
Add type annotations to all functions in [file].

Requirements:
- Parameter types
- Return types
- Generic types where appropriate
- No 'any' types unless necessary

Verify with: [mypy/tsc --noEmit]
```

### Add Docstrings

```markdown
Add docstrings to all public functions/classes in [file].

Style: [Google/NumPy/JSDoc]

Include:
- Brief description
- Parameters with types
- Return value
- Exceptions raised
- Example usage (for complex functions)
```

### Improve Naming

```markdown
Review and improve naming in [file/module].

Check:
- Variables: descriptive, not abbreviated
- Functions: verb-based, clear purpose
- Classes: noun-based, single responsibility
- Constants: UPPER_CASE with clear meaning

Rename anything unclear, updating all references.
```

## Quick Reference

| Task | Key Elements to Include |
|------|------------------------|
| Unit test | Function, test cases, framework, location |
| Integration test | Workflow steps, setup, assertions |
| Extract method | Code location, new name, requirements |
| Extract class | Methods to move, new class details |
| Error handling | Current issues, desired behavior |
| Type annotations | File, verification command |

<Card title="Good vs Bad Instructions" icon="scale-balanced" href="/openhands/usage/tips/good-vs-bad-instructions">
  Learn how to customize these prompts effectively
</Card>
